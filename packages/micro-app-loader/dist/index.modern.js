import{start as t,loadMicroApp as e}from"qiankun";import n from"vue";function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}class p{constructor(){this._started=!1,this._appList=[]}start(e=null){this._started||(e?t(e):t(),this._started=!0)}_addApp(t){const e=t.name,n=this._appList.findIndex(t=>t.name===e);-1!==n?(this._appList.splice(n,1,t),console.warn(`[QianKunHelper] updated app manifest, name is '${e}'`)):this._appList.push(t)}addApp(...t){t.forEach(t=>this._addApp(t))}_findAppByName(t){return this._appList.find(e=>e.name===t)}getProps(t,e){return t.reduce((t,n)=>(t[n]=e[n],t),{})}findApp(t){return this._findAppByName(t)}loadApp(t,n,p){const s=a({},t,{container:n,props:this.getProps(t.propKeys||[],p)});return e(s)}}const s=new p,r=(t,e)=>(a,p={autoRemove:!0})=>{const s=`app-container-${a}`;return n.extend({data:()=>({manifest:null,appInstance:null,errorMessage:""}),computed:{appName(){return this.manifest&&this.manifest.name||"unname"}},mounted(){console.log("MicroAppComponent mounted. containerId =",s);const n=t.findApp(a);if(n){const a=e();this.appInstance=t.loadApp(n,`#${s}`,a)}else this.errorMessage="app not found, name = "+a},beforeDestroy(){var t;(null==(t=p.autoRemove)||t)&&this.appInstance&&"function"==typeof this.appInstance.unmount&&this.appInstance.unmount()},render(t){return t("div",""!==this.errorMessage?this.errorMessage:{attrs:{id:s,"data-app-name":this.appName}})}})};export{p as MicroAppLoader,r as makeAppComponentCreator,s as microAppLoader};
//# sourceMappingURL=index.modern.js.map
