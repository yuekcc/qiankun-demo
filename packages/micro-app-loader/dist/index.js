var n=require("qiankun");function t(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var e=t(require("vue"));function r(){return(r=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}var a=function(){function t(){this._started=!1,this._appList=[]}var e=t.prototype;return e.start=function(t){void 0===t&&(t=null),this._started||(t?n.start(t):n.start(),this._started=!0)},e._addApp=function(n){var t=n.name,e=this._appList.findIndex(function(n){return n.name===t});-1!==e?(this._appList.splice(e,1,n),console.warn("[QianKunHelper] updated app manifest, name is '"+t+"'")):this._appList.push(n)},e.addApp=function(){var n=this;[].slice.call(arguments).forEach(function(t){return n._addApp(t)})},e._findAppByName=function(n){return this._appList.find(function(t){return t.name===n})},e.getProps=function(n,t){return n.reduce(function(n,e){return n[e]=t[e],n},{})},e.findApp=function(n){return this._findAppByName(n)},e.loadApp=function(t,e,a){var p=r({},t,{container:e,props:this.getProps(t.propKeys||[],a)});return n.loadMicroApp(p)},t}(),p=new a;exports.MicroAppLoader=a,exports.makeAppComponentCreator=function(n,t){return function(r,a){void 0===a&&(a={autoRemove:!0});var p="app-container-"+r;return e.default.extend({data:function(){return{manifest:null,appInstance:null,errorMessage:""}},computed:{appName:function(){return this.manifest&&this.manifest.name||"unname"}},mounted:function(){console.log("MicroAppComponent mounted. containerId =",p);var e=n.findApp(r);if(e){var a=t();this.appInstance=n.loadApp(e,"#"+p,a)}else this.errorMessage="app not found, name = "+r},beforeDestroy:function(){var n;(null==(n=a.autoRemove)||n)&&this.appInstance&&"function"==typeof this.appInstance.unmount&&this.appInstance.unmount()},render:function(n){return n("div",""!==this.errorMessage?this.errorMessage:{attrs:{id:p,"data-app-name":this.appName}})}})}},exports.microAppLoader=p;
//# sourceMappingURL=index.js.map
