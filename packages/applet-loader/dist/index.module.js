import{loadMicroApp as t,start as n}from"qiankun";import e from"vue";function r(){return(r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}var a,o=function(){function e(){this._started=!1,this._appletList=[]}var a=e.prototype;return a._addApplet=function(t){var n=t.name,e=this._appletList.findIndex(function(t){return t.name===n});-1!==e?(this._appletList.splice(e,1,t),console.warn("[QianKunHelper] updated app manifest, name is '"+n+"'")):this._appletList.push(t)},a._findAppByName=function(t){return this._appletList.find(function(n){return n.name===t})},a.getProps=function(t,n){return t.reduce(function(t,e){return t[e]=n[e],t},{})},a.addApplet=function(){var t=this;[].slice.call(arguments).forEach(function(n){return t._addApplet(n)})},a.findApplet=function(t){return this._findAppByName(t)},a.loadApplet=function(n,e,a){var o=r({},n,{container:e,props:this.getProps(n.propKeys||[],a)});return t(o)},a.start=function(t){this._started||(t?n(t):n(),this._started=!0)},e}(),p=new o,i=(a=0,function(){return a++}),s=function(t,n){return function(a,o){void 0===o&&(o={autoRemove:!0,propsData:{}});var p="applet-container-"+a+"-"+i();return e.extend({data:function(){return{manifest:null,appInstance:null,errorMessage:""}},computed:{appName:function(){return this.manifest&&this.manifest.name||"unname"}},mounted:function(){console.log("AppletComponent mounted. containerId =",p);var e=t.findApplet(a);if(e){var i=n(this);o&&o.propsData&&Object.keys(o.propsData).length>0&&(i=r({},i,o.propsData)),this.appInstance=t.loadApplet(e,"#"+p,i)}else this.errorMessage="applet not found. lookup with name '"+a+"'"},beforeDestroy:function(){var t;(null==(t=o.autoRemove)||t)&&this.appInstance&&"function"==typeof this.appInstance.unmount&&(console.log("AppletComponent unmounted. containerId =",p),this.appInstance.unmount())},render:function(t){return t("div",""!==this.errorMessage?this.errorMessage:{attrs:{id:p},class:"applet-container"})}})}};export{o as AppletLoader,p as appletLoader,s as makeAppletComponentCreator};
//# sourceMappingURL=index.module.js.map
