!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("qiankun"),require("vue")):"function"==typeof define&&define.amd?define(["exports","qiankun","vue"],e):e((t||self).appletLoader={},t.qiankun,t.vue)}(this,function(t,e,n){function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=r(n);function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var p,i=function(){function t(){this._started=!1,this._appletList=[]}var n=t.prototype;return n._addApplet=function(t){var e=t.name,n=this._appletList.findIndex(function(t){return t.name===e});-1!==n?(this._appletList.splice(n,1,t),console.warn("[QianKunHelper] updated app manifest, name is '"+e+"'")):this._appletList.push(t)},n._findAppByName=function(t){return this._appletList.find(function(e){return e.name===t})},n.getProps=function(t,e){return t.reduce(function(t,n){return t[n]=e[n],t},{})},n.addApplet=function(){var t=this;[].slice.call(arguments).forEach(function(e){return t._addApplet(e)})},n.findApplet=function(t){return this._findAppByName(t)},n.loadApplet=function(t,n,r){var a=o({},t,{container:n,props:this.getProps(t.propKeys||[],r)});return e.loadMicroApp(a)},n.start=function(t){this._started||(t?e.start(t):e.start(),this._started=!0)},t}(),s=new i,u=(p=0,function(){return p++});t.AppletLoader=i,t.appletLoader=s,t.makeAppletComponentCreator=function(t,e){return function(n,r){void 0===r&&(r={autoRemove:!0,propsData:{}});var p="applet-container-"+n+"-"+u();return a.default.extend({data:function(){return{manifest:null,appInstance:null,errorMessage:""}},computed:{appName:function(){return this.manifest&&this.manifest.name||"unname"}},mounted:function(){console.log("AppletComponent mounted. containerId =",p);var a=t.findApplet(n);if(a){var i=e(this);r&&r.propsData&&Object.keys(r.propsData).length>0&&(i=o({},i,r.propsData)),this.appInstance=t.loadApplet(a,"#"+p,i)}else this.errorMessage="applet not found. lookup with name '"+n+"'"},beforeDestroy:function(){var t;(null==(t=r.autoRemove)||t)&&this.appInstance&&"function"==typeof this.appInstance.unmount&&(console.log("AppletComponent unmounted. containerId =",p),this.appInstance.unmount())},render:function(t){return t("div",""!==this.errorMessage?this.errorMessage:{attrs:{id:p},class:"applet-container"})}})}}});
//# sourceMappingURL=index.umd.js.map
